//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using Microsoft.AspNetCore.Mvc;
using Substrate.KILT.NET.RestService.Generated.Storage;
using Substrate.NetApi.Model.Types.Base;
using Substrate.ServiceLayer.Attributes;
using System.Collections.Generic;
using System.Threading.Tasks;


namespace Substrate.KILT.NET.RestService.Generated.Controller
{
    
    
    /// <summary>
    /// PublicCredentialsController controller to access storages.
    /// </summary>
    [ApiController()]
    [Route("[controller]")]
    public sealed class PublicCredentialsController : ControllerBase
    {
        
        private IPublicCredentialsStorage _publicCredentialsStorage;
        
        /// <summary>
        /// PublicCredentialsController constructor.
        /// </summary>
        public PublicCredentialsController(IPublicCredentialsStorage publicCredentialsStorage)
        {
            _publicCredentialsStorage = publicCredentialsStorage;
        }
        
        /// <summary>
        /// >> Credentials
        ///  The map of public credentials already attested.
        ///  It maps from a (subject id + credential id) -> the creation
        ///  details of the credential.
        /// </summary>
        [HttpGet("Credentials")]
        [ProducesResponseType(typeof(Substrate.KILT.NET.NetApiExt.Generated.Model.public_credentials.credentials.CredentialEntry), 200)]
        [StorageKeyBuilder(typeof(Substrate.KILT.NET.NetApiExt.Generated.Storage.PublicCredentialsStorage), "CredentialsParams", typeof(Substrate.NetApi.Model.Types.Base.BaseTuple<Substrate.KILT.NET.NetApiExt.Generated.Model.runtime_common.assets.AssetDid, Substrate.KILT.NET.NetApiExt.Generated.Model.primitive_types.H256>))]
        public IActionResult GetCredentials(string key)
        {
            return this.Ok(_publicCredentialsStorage.GetCredentials(key));
        }
        
        /// <summary>
        /// >> CredentialSubjects
        ///  A reverse index mapping from credential ID to the subject the credential
        ///  was issued to.
        /// 
        ///  It it used to perform efficient lookup of credentials given their ID.
        /// </summary>
        [HttpGet("CredentialSubjects")]
        [ProducesResponseType(typeof(Substrate.KILT.NET.NetApiExt.Generated.Model.runtime_common.assets.AssetDid), 200)]
        [StorageKeyBuilder(typeof(Substrate.KILT.NET.NetApiExt.Generated.Storage.PublicCredentialsStorage), "CredentialSubjectsParams", typeof(Substrate.KILT.NET.NetApiExt.Generated.Model.primitive_types.H256))]
        public IActionResult GetCredentialSubjects(string key)
        {
            return this.Ok(_publicCredentialsStorage.GetCredentialSubjects(key));
        }
    }
}
